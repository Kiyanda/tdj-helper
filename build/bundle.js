var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function l(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function c(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function i(t){t.parentNode.removeChild(t)}function a(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function d(){return p(" ")}function h(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function m(t){return function(e){return e.preventDefault(),t.call(this,e)}}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t){return""===t?null:+t}function $(t,e){t.value=null==e?"":e}function y(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}t.selectedIndex=-1}let b;function _(t){b=t}function x(){const t=function(){if(!b)throw new Error("Function called outside component initialization");return b}();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const l=function(t,e,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,!1,e),o}(e,n);o.slice().forEach((e=>{e.call(t,l)}))}}}const k=[],w=[],E=[],S=[],O=Promise.resolve();let M=!1;function C(t){E.push(t)}let N=!1;const A=new Set;function j(){if(!N){N=!0;do{for(let t=0;t<k.length;t+=1){const e=k[t];_(e),J(e.$$)}for(_(null),k.length=0;w.length;)w.pop()();for(let t=0;t<E.length;t+=1){const e=E[t];A.has(e)||(A.add(e),e())}E.length=0}while(k.length);for(;S.length;)S.pop()();M=!1,N=!1,A.clear()}}function J(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(C)}}const L=new Set;let T;function H(t,e){t&&t.i&&(L.delete(t),t.i(e))}function z(t,e,n,o){if(t&&t.o){if(L.has(t))return;L.add(t),T.c.push((()=>{L.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function I(t,e){t.d(1),e.delete(t.key)}function q(t){t&&t.c()}function B(t,n,r,s){const{fragment:c,on_mount:u,on_destroy:i,after_update:a}=t.$$;c&&c.m(n,r),s||C((()=>{const n=u.map(e).filter(l);i?i.push(...n):o(n),t.$$.on_mount=[]})),a.forEach(C)}function D(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function P(t,e){-1===t.$$.dirty[0]&&(k.push(t),M||(M=!0,O.then(j)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function R(e,l,r,s,c,u,a,f=[-1]){const p=b;_(e);const d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l.context||(p?p.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:l.target||p.$$.root};a&&a(d.root);let h=!1;if(d.ctx=r?r(e,l.props||{},((t,n,...o)=>{const l=o.length?o[0]:n;return d.ctx&&c(d.ctx[t],d.ctx[t]=l)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](l),h&&P(e,t)),n})):[],d.update(),h=!0,o(d.before_update),d.fragment=!!s&&s(d.ctx),l.target){if(l.hydrate){const t=function(t){return Array.from(t.childNodes)}(l.target);d.fragment&&d.fragment.l(t),t.forEach(i)}else d.fragment&&d.fragment.c();l.intro&&H(e.$$.fragment),B(e,l.target,l.anchor,l.customElement),j()}_(p)}class U{$destroy(){D(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const F="TDJ-HELPER";function G(t){let e=localStorage.getItem(F);return e?(e=JSON.parse(e),t?e[t]:e):null}const K={atk:{"天":[10,4],"地":[5,2],"荒":[7,3]},def:{"天":[5,2],"地":[10,4],"荒":[7,3]}},Q=[{label:"--",score:0,type:"atk"},{label:"攻擊",score:11,type:"atk"},{label:"傷害",score:10,type:"atk"},{label:"穿透",score:6,type:"atk"},{label:"暴擊",score:3,type:"atk"},{label:"反擊",score:0,type:"atk"},{label:"氣血",score:7,type:"def"},{label:"免傷",score:5,type:"def"},{label:"防禦",score:1,type:"def"},{label:"抗暴",score:0,type:"def"}].map((t=>(t.range=K[t.type],t)));function V(t){return Q.find((e=>e.label===t))}const W={"天":164,"地":143,"荒":145},X=["荒蟄","頭狼","幽魎","羅鬼","妖術師","朱焰魔火","九環朱蝮","赤練鬼","剛破鬼","凶骸兵","冥葵","屍魔術士","咒石兵","冰魔蠍","死魘鬼卒","鬼面花蛛","百眼翼魔"];function Y(t,e,n){const o=t.slice();return o[7]=e[n],o[9]=n,o}function Z(e){let n,o,l,r,s=e[7].label+" "+e[7].score;return{c(){n=f("option"),o=p(s),l=d(),n.__value=r=e[7].label,n.value=n.__value},m(t,e){u(t,n,e),c(n,o),c(n,l)},p:t,d(t){t&&i(n)}}}function tt(e){let n,l,r,s,p,m,b,_,x,k,w=Q,E=[];for(let t=0;t<w.length;t+=1)E[t]=Z(Y(e,w,t));return{c(){n=f("div"),l=f("select");for(let t=0;t<E.length;t+=1)E[t].c();r=d(),s=f("input"),p=d(),m=f("div"),b=f("input"),g(l,"class","svelte-1dran9s"),void 0===e[0].prop&&C((()=>e[4].call(l))),g(s,"type","number"),g(s,"max",e[2]),g(s,"min",e[1]),g(s,"class","svelte-1dran9s"),g(b,"type","range"),g(b,"max",e[2]),g(b,"min",e[1]),g(b,"style",_=`--max: ${e[2]};`),g(b,"class","svelte-1dran9s"),g(m,"class","flex svelte-1dran9s"),g(n,"class","flex list-item svelte-1dran9s")},m(t,o){u(t,n,o),c(n,l);for(let t=0;t<E.length;t+=1)E[t].m(l,null);y(l,e[0].prop),c(n,r),c(n,s),$(s,e[0].value),c(n,p),c(n,m),c(m,b),$(b,e[0].value),x||(k=[h(l,"change",e[4]),h(s,"input",e[5]),h(b,"change",e[6]),h(b,"input",e[6])],x=!0)},p(t,[e]){if(0&e){let n;for(w=Q,n=0;n<w.length;n+=1){const o=Y(t,w,n);E[n]?E[n].p(o,e):(E[n]=Z(o),E[n].c(),E[n].m(l,null))}for(;n<E.length;n+=1)E[n].d(1);E.length=w.length}1&e&&y(l,t[0].prop),4&e&&g(s,"max",t[2]),2&e&&g(s,"min",t[1]),1&e&&v(s.value)!==t[0].value&&$(s,t[0].value),4&e&&g(b,"max",t[2]),2&e&&g(b,"min",t[1]),4&e&&_!==(_=`--max: ${t[2]};`)&&g(b,"style",_),1&e&&$(b,t[0].value)},i:t,o:t,d(t){t&&i(n),a(E,t),x=!1,o(k)}}}function et(t,e,n){let o,l,{position:r="天"}=e,{item:s={prop:"--",value:5}}=e;return t.$$set=t=>{"position"in t&&n(3,r=t.position),"item"in t&&n(0,s=t.item)},t.$$.update=()=>{9&t.$$.dirty&&n(2,[o,l]=V(s.prop).range[r]||[],o,(n(1,l),n(0,s),n(3,r)))},[s,l,o,r,function(){s.prop=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(0,s)},function(){s.value=v(this.value),n(0,s)},function(){s.value=v(this.value),n(0,s)}]}class nt extends U{constructor(t){super(),R(this,t,et,tt,r,{position:3,item:0})}}const ot=[];function lt(e,n=t){let o;const l=new Set;function s(t){if(r(e,t)&&(e=t,o)){const t=!ot.length;for(const t of l)t[1](),ot.push(t,e);if(t){for(let t=0;t<ot.length;t+=2)ot[t][0](ot[t+1]);ot.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(r,c=t){const u=[r,c];return l.add(u),1===l.size&&(o=n(s)||t),r(e),()=>{l.delete(u),0===l.size&&(o(),o=null)}}}}const rt=function(){let t=G("historeUrls")||[];const{subscribe:e,set:n,update:o}=lt(t);return{subscribe:e,add:t=>o((e=>[...new Set([...e,t])])),remove:t=>o((e=>e.filter((e=>e!==t)))),reset:()=>n([])}}(),st=function(e,n,r){const c=!Array.isArray(e),u=c?[e]:e,i=n.length<2;return a=e=>{let r=!1;const a=[];let f=0,p=t;const d=()=>{if(f)return;p();const o=n(c?a[0]:a,e);i?e(o):p=l(o)?o:t},h=u.map(((t,e)=>s(t,(t=>{a[e]=t,f&=~(1<<e),r&&d()}),(()=>{f|=1<<e}))));return r=!0,d(),function(){o(h),p()}},{subscribe:lt(r,a).subscribe};var a}(rt,(t=>(function(t){if(!t||!t.key)return!1;let e=G()||{};e[t.key]=t.value,localStorage.setItem(F,JSON.stringify(e))}({key:"historeUrls",value:t}),t)));function ct(t,e,n){const o=t.slice();return o[5]=e[n],o}function ut(t,e){let n,l,r,s,a,p,v,$=at(e[5])+"";function y(){return e[2](e[5])}function b(){return e[3](e[5])}return{key:t,first:null,c(){n=f("div"),l=f("button"),l.textContent="⨯",r=d(),s=f("span"),a=d(),g(l,"class","btn svelte-1g3u82m"),g(n,"class","li svelte-1g3u82m"),this.first=n},m(t,e){u(t,n,e),c(n,l),c(n,r),c(n,s),s.innerHTML=$,c(n,a),p||(v=[h(l,"click",m(y)),h(s,"click",m(b))],p=!0)},p(t,n){e=t,1&n&&$!==($=at(e[5])+"")&&(s.innerHTML=$)},d(t){t&&i(n),p=!1,o(v)}}}function it(e){let n,o,l,r=[],s=new Map,a=e[0];const p=t=>t[5];for(let t=0;t<a.length;t+=1){let n=ct(e,a,t),o=p(n);s.set(o,r[t]=ut(o,n))}return{c(){n=f("details"),o=f("summary"),o.textContent="魂石紀錄:",l=d();for(let t=0;t<r.length;t+=1)r[t].c();n.open=!0,g(n,"class","aside svelte-1g3u82m")},m(t,e){u(t,n,e),c(n,o),c(n,l);for(let t=0;t<r.length;t+=1)r[t].m(n,null)},p(t,[e]){3&e&&(a=t[0],r=function(t,e,n,o,l,r,s,c,u,i,a,f){let p=t.length,d=r.length,h=p;const m={};for(;h--;)m[t[h].key]=h;const g=[],v=new Map,$=new Map;for(h=d;h--;){const t=f(l,r,h),c=n(t);let u=s.get(c);u?o&&u.p(t,e):(u=i(c,t),u.c()),v.set(c,g[h]=u),c in m&&$.set(c,Math.abs(h-m[c]))}const y=new Set,b=new Set;function _(t){H(t,1),t.m(c,a),s.set(t.key,t),a=t.first,d--}for(;p&&d;){const e=g[d-1],n=t[p-1],o=e.key,l=n.key;e===n?(a=e.first,p--,d--):v.has(l)?!s.has(o)||y.has(o)?_(e):b.has(l)?p--:$.get(o)>$.get(l)?(b.add(o),_(e)):(y.add(l),p--):(u(n,s),p--)}for(;p--;){const e=t[p];v.has(e.key)||u(e,s)}for(;d;)_(g[d-1]);return g}(r,e,p,1,t,a,s,n,I,ut,null,ct))},i:t,o:t,d(t){t&&i(n);for(let t=0;t<r.length;t+=1)r[t].d()}}}function at(t){let e=JSON.parse(t);return[ft("",e.title+"‧"+e.position),ft("計分",e.score),...e.items.filter((t=>"--"!==t.prop)).map((t=>ft(t.prop,t.value)))].join("")}function ft(t="",e=""){return`<span class="i ib">\n      <sup>${t}</sup>\n      ${e}\n    </span>`}function pt(t,e,n){let o;var l,r;l=st,r=t=>n(0,o=t),t.$$.on_destroy.push(s(l,r));const c=x();function u(t){c("apply",{url:t})}return[o,u,t=>rt.remove(t),t=>u(t)]}class dt extends U{constructor(t){super(),R(this,t,pt,it,r,{})}}function ht(t,e,n){const o=t.slice();return o[15]=e[n],o[16]=e,o[17]=n,o}function mt(t,e,n){const o=t.slice();return o[18]=e[n],o}function gt(e){let n,o;return{c(){n=f("option"),n.__value=o=e[18],n.value=n.__value},m(t,e){u(t,n,e)},p:t,d(t){t&&i(n)}}}function vt(t){let e,n,o;function l(e){t[11](e,t[15],t[16],t[17])}let r={position:t[0]};return void 0!==t[15]&&(r.item=t[15]),e=new nt({props:r}),w.push((()=>function(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}(e,"item",l))),{c(){q(e.$$.fragment)},m(t,n){B(e,t,n),o=!0},p(o,l){t=o;const r={};var s;1&l&&(r.position=t[0]),!n&&2&l&&(n=!0,r.item=t[15],s=()=>n=!1,S.push(s)),e.$set(r)},i(t){o||(H(e.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),o=!1},d(t){D(e,t)}}}function $t(t){let e,n,l,r,s,v,y,b,_,x,k,w,E,S,O,M,C,N,A,j,J,L,I,P,R,U,F,G,K,Q,V,Y,Z,tt,et,nt,ot,lt,rt,st,ct,ut,it,at,ft,pt,$t,yt,bt,_t,xt,kt=t[3].max+"",wt=X,Et=[];for(let e=0;e<wt.length;e+=1)Et[e]=gt(mt(t,wt,e));let St=t[1],Ot=[];for(let e=0;e<St.length;e+=1)Ot[e]=vt(ht(t,St,e));const Mt=t=>z(Ot[t],1,1,(()=>{Ot[t]=null}));return pt=new dt({}),pt.$on("apply",t[5]),{c(){e=f("h1"),e.textContent="天地劫M 絕品魂石 評估",n=d(),l=f("form"),r=f("fieldset"),s=f("legend"),v=p("絕‧魂石孔位\n      "),y=f("input"),b=d(),_=f("datalist");for(let t=0;t<Et.length;t+=1)Et[t].c();x=d(),k=f("div"),w=f("label"),E=f("input"),S=p("\n        天"),O=d(),M=f("label"),C=f("input"),N=p("\n        地"),A=d(),j=f("label"),J=f("input"),L=p("\n        荒"),I=d(),P=f("fieldset"),R=f("legend"),R.textContent="副屬",U=d();for(let t=0;t<Ot.length;t+=1)Ot[t].c();F=d(),G=f("fieldset"),K=f("legend"),K.textContent="計分",Q=d(),V=f("input"),tt=d(),et=f("sub"),nt=p("/ "),ot=p(kt),lt=d(),rt=f("div"),st=f("input"),ut=d(),it=f("input"),ft=d(),q(pt.$$.fragment),$t=d(),yt=f("footer"),yt.innerHTML='<ul><li>Made by Rplus</li> \n    <li>計分標準參考來源：\n      <br/> \n      <a href="https://bbs.nga.cn/read.php?tid=26383169&amp;rand=456" target="_blank" rel="noopener">魂石选择终极攻略 | NGA玩家社区</a></li></ul>',g(y,"class","title svelte-twyuws"),g(y,"type","search"),g(y,"list","rock-types"),g(_,"id","rock-types"),g(E,"type","radio"),g(E,"name","position"),E.__value="天",E.value=E.__value,E.checked=!0,t[8][0].push(E),g(C,"type","radio"),g(C,"name","position"),C.__value="地",C.value=C.__value,t[8][0].push(C),g(J,"type","radio"),g(J,"name","position"),J.__value="荒",J.value=J.__value,t[8][0].push(J),g(k,"class","flex jc-se"),g(V,"type","text"),V.readOnly=!0,g(V,"class","output svelte-twyuws"),V.value=Y=t[3].score,g(V,"style",Z=`--score: ${t[3].score}; --max: ${t[3].max}`),g(et,"class","max svelte-twyuws"),g(st,"type","submit"),st.value="記錄",st.disabled=ct=!t[3].score,g(it,"type","reset"),g(rt,"class","flex jc-sb"),g(G,"class",""),g(l,"class","main"),g(l,"style",at=`--break-point: ${W[t[0]]}`),g(yt,"class","footer")},m(o,i){u(o,e,i),u(o,n,i),u(o,l,i),c(l,r),c(r,s),c(s,v),c(s,y),$(y,t[2]),c(s,b),c(s,_);for(let t=0;t<Et.length;t+=1)Et[t].m(_,null);c(r,x),c(r,k),c(k,w),c(w,E),E.checked=E.__value===t[0],c(w,S),c(k,O),c(k,M),c(M,C),C.checked=C.__value===t[0],c(M,N),c(k,A),c(k,j),c(j,J),J.checked=J.__value===t[0],c(j,L),c(l,I),c(l,P),c(P,R),c(P,U);for(let t=0;t<Ot.length;t+=1)Ot[t].m(P,null);c(l,F),c(l,G),c(G,K),c(G,Q),c(G,V),c(G,tt),c(G,et),c(et,nt),c(et,ot),c(G,lt),c(G,rt),c(rt,st),c(rt,ut),c(rt,it),u(o,ft,i),B(pt,o,i),u(o,$t,i),u(o,yt,i),bt=!0,_t||(xt=[h(y,"input",t[6]),h(E,"change",t[7]),h(C,"change",t[9]),h(J,"change",t[10]),h(st,"click",m(t[4]))],_t=!0)},p(t,[e]){if(4&e&&$(y,t[2]),0&e){let n;for(wt=X,n=0;n<wt.length;n+=1){const o=mt(t,wt,n);Et[n]?Et[n].p(o,e):(Et[n]=gt(o),Et[n].c(),Et[n].m(_,null))}for(;n<Et.length;n+=1)Et[n].d(1);Et.length=wt.length}if(1&e&&(E.checked=E.__value===t[0]),1&e&&(C.checked=C.__value===t[0]),1&e&&(J.checked=J.__value===t[0]),3&e){let n;for(St=t[1],n=0;n<St.length;n+=1){const o=ht(t,St,n);Ot[n]?(Ot[n].p(o,e),H(Ot[n],1)):(Ot[n]=vt(o),Ot[n].c(),H(Ot[n],1),Ot[n].m(P,null))}for(T={r:0,c:[],p:T},n=St.length;n<Ot.length;n+=1)Mt(n);T.r||o(T.c),T=T.p}(!bt||8&e&&Y!==(Y=t[3].score)&&V.value!==Y)&&(V.value=Y),(!bt||8&e&&Z!==(Z=`--score: ${t[3].score}; --max: ${t[3].max}`))&&g(V,"style",Z),(!bt||8&e)&&kt!==(kt=t[3].max+"")&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(ot,kt),(!bt||8&e&&ct!==(ct=!t[3].score))&&(st.disabled=ct),(!bt||1&e&&at!==(at=`--break-point: ${W[t[0]]}`))&&g(l,"style",at)},i(t){if(!bt){for(let t=0;t<St.length;t+=1)H(Ot[t]);H(pt.$$.fragment,t),bt=!0}},o(t){Ot=Ot.filter(Boolean);for(let t=0;t<Ot.length;t+=1)z(Ot[t]);z(pt.$$.fragment,t),bt=!1},d(r){r&&i(e),r&&i(n),r&&i(l),a(Et,r),t[8][0].splice(t[8][0].indexOf(E),1),t[8][0].splice(t[8][0].indexOf(C),1),t[8][0].splice(t[8][0].indexOf(J),1),a(Ot,r),r&&i(ft),D(pt,r),r&&i($t),r&&i(yt),_t=!1,o(xt)}}}function yt(t,e,n){let o,l="天",r=new Array(4),s="";return t.$$.update=()=>{2&t.$$.dirty&&n(3,o=function(t){return t.reduce(((t,e)=>{let n=V(e.prop),o=n.range[l][0];return t.score+=n.score*e.value,t.max+=n.score*o,t}),{score:0,max:0})}(r)),3&t.$$.dirty&&r.forEach((t=>{let e=V(t.prop),[n,o]=e.range[l];t.value=function(t,e,n){return t<=e?e:t>=n?n:t}(t.value,o,n)}))},[l,r,s,o,function(){o.score&&rt.add(JSON.stringify({title:s,position:l,items:r,score:o.score}))},function(t){let e=JSON.parse(t.detail.url);n(0,l=e.position),n(2,s=e.title),n(1,r=e.items)},function(){s=this.value,n(2,s)},function(){l=this.__value,n(0,l)},[[]],function(){l=this.__value,n(0,l)},function(){l=this.__value,n(0,l)},function(t,e,o,l){o[l]=t,n(1,r)}]}return new class extends U{constructor(t){super(),R(this,t,yt,$t,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
